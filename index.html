<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test webapp</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            background-color: #ef946b;
            font-family: "Roboto", serif;
        }

        h1, p {
            margin: 0;
        }

        .app {
            max-width: 450px;
            margin: 0 auto;
        }

        .app-content {
            background-color: #fff;
            padding: 10px 20px 20px;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <div class="app">
        <div class="app-content">
            <h1>It's web app testing</h1>

            <p style="color: #4e724e; margin: 10px 0 15px">Counter added</p>

            <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; width: 100%">
                <div id="counterValue"></div>
            </div>

            <p style="color: #4e724e; margin: 10px 0 15px">Link added</p>

            <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; width: 100%">
                <button id="linkButton" type="button" style="margin: 20px 0;">
                    Open Link
                </button>

                <div id="linkValue"><span style="color: #724e5b; font-weight: bold">Link was not viewed</span></div>
            </div>
        </div>
    </div>

    <script>
        window.onload = () => {
          const linkBtn = document.getElementById('linkButton')
          const countValue = document.getElementById('counterValue')
          const linkValue = document.getElementById('linkValue')

          if (localStorage.getItem('count')) {
            localStorage.setItem('count', (Number(localStorage.getItem('count')) + 1).toString())
          } else {
            localStorage.setItem('count', '1')
          }

          countValue.innerHTML = `currenCount = <span style="color: #4e724e; font-weight: bold">${localStorage.getItem('count')}</span>`

          const onBtnClick = () => {
            window.Telegram.WebApp.openInvoice('https://www.google.com/', () => {
              linkValue.innerHTML = `<span style="color: #4e724e; font-weight: bold">Link was Viewed</span>`
            })
          }

          linkBtn.addEventListener('click', onBtnClick)
        }
    </script>
</body>
</html>